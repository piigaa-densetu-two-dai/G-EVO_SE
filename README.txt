ゲーミングボーイ Sound Edition (略して「ゲボSE」又は「G-EVO SE」)

ゲームボーイをUSB接続の音源ユニットにする為の物体です。
Windows PCから制御してゲームボーイ対応のVGM/VGZファイルを演奏することが出来ます。
初代ゲームボーイとスーパーゲームボーイのみで動作確認していますそれ以外は知りません。

* 作り方

見ての通りの極めて簡単なものですがピコボード上のダイオードを外す必要があります。
ピコボードをセルフパワー駆動させるために必要な改造です必ず外してください。diode.jpgを見て下さい。
ファームウェア書込み済の状態でお送りしますのでピコボードに書込みは行なわないで下さい。

御注意
回路を簡素にする為に信号電圧レベル変換回路を省略しています
RP2040のIOピン(プラス側にダイオードが入っていないピンのみ)をゲームボーイのスロット端子に直結しています。
実質的に問題ないであろう事を確認していますが定格外の使い方をしているのでその辺自己責任でお願いします。

* セッティング

ゲームボーイにゲボSEを装着し※、ゲボSEとWindwos PCをUSBケーブルで接続します。
ゲームボーイを通電するとWindows PCがゲボSEをシリアルポートとして認識します。これで準備完了。
Windowsコマンドプロンプトで演奏プログラム(dmgplay)を実行するとゲームボーイから音が出るんだという。

※御注意！！！
ゲボSEは基板の厚みが薄いのでそのままゲームボーイに挿してもうまく挿さりません💦。
基板のエッジ接点の裏に0.4mm厚程度の紙やテープ等を挟む・貼る等の工夫をして挿してください。

* 演奏プログラム(dmgplay)の使い方

Windowsコマンドプロンプトから以下のように実行して下さい。

dmgplay [-l count] comport file

例: dmgplay -l 3 com1 song.vgz

comportはゲーミングボーイのCOMポート、fileにはVGM又はVGZファイルを指定します。
無論、ゲームボーイ向けのファイルのみに対応です。COMポート名はデバイスマネージャーで確認して下さい。
-lオプションはループ再生パートの再生回数です。0以上の整数を指定して下さい。
-lオプション未指定の場合は1回の再生です。値に0を指定した場合は無限ループ再生となります
ループ再生パートの無いファイルの場合はこのオプションは無視されます。

* ゲーミングボーイの通信プロトコル

COMポートに以下の順にデータを書き込むとゲームボーイ上の指定したアドレスに指定した値が書き込まれます。

0xb3, address, data (3バイト、何れも8ビット値)

address 0x00はゲームボーイ上のアドレス0xff10に相当します。
要はVGMファイルのGameBoy DMGコマンド(0xb3)をそのままCOMポートに書き込めばいいんだという。

* COMポートプログラミングのヒント

通信はUSBで完結しているのでCOMポートの通信速度等の設定は意味を持ちません。デフォルト設定のままで大丈夫です。

* その他

dmgplayは高精度タイマーを使用して高精度再生しますがCPU負荷高いです💦。
